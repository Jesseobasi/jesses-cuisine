<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>JCuisines</title>
<link rel="stylesheet" href="./style.css?v=5" />  
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;800&display=swap" rel="stylesheet">
<link rel="icon" href="images/icons/192.png" type="image/jpeg">
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#F59E0B">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="JCuisines">
<link rel="apple-touch-icon" href="images/icons/apple-touch-icon.png">
</head>
<body>

<div id="preloader"><div class="spinner"></div></div>

<header>
<nav id="navbar">
<div class="nav-container">
<h1 class="logo"><a href="index.html"><span class="highlight">JC</span>uisines</a></h1>

<ul class="nav-links">
<li><a href="index.html#about">About</a></li>
<li><a href="menu.html">Menu</a></li>
<li><a href="catering.html">Catering</a></li>
<li><a href="faq.html">FAQ</a></li>
<li><a href="index.html#contact">Contact</a></li>
<li class="mobile-cart-link"><a href="cart.html" id="mobile-cart-icon">Cart (0)</a></li>
</ul>

<a href="cart.html" id="cart-icon" class="btn-cart">Cart (0)</a>

<div class="menu-toggle">
<span class="bar"></span>
<span class="bar"></span>
<span class="bar"></span>
</div>
</div>
</nav>

<section class="hero">
<div class="video-wrapper">
<video id="hero-video" autoplay loop muted playsinline>
<source src="images/background.mp4" type="video/mp4">
Your browser does not support the video tag.
</video>
</div>
<div class="overlay"></div>
<div class="hero-content">
<h2>Fresh ‚Ä¢ Flavorful ‚Ä¢ Authentic</h2>
<a href="menu.html" class="btn ripple">View Menu</a>
</div>
</section>
</header>

<section id="about" class="about section">
  <h2>About Us</h2>
  <div class="about-content">
    <div class="video-frame">
      <video autoplay loop muted playsinline class="about-vertical-video">
        <source src="images/about-video.mp4" type="video/mp4">
      </video>
    </div>
    <p>
      Welcome to <strong>JCuisines</strong> ‚Äî where every dish is crafted 
      with passion and memory. üçΩÔ∏è‚ú® Our kitchen was founded on a love for cooking 
      that spans generations. We believe food is more than just sustenance; 
      it's a way to connect, to find comfort, and to spread joy. 
      Join us on this heartfelt journey of flavors.
    </p>
  </div>
</section>

<section id="meal-of-week" class="section">
<h2>Meal of the Week</h2>
<div class="about-content">
<div class="image-frame reveal-item">
<img src="images/mealofweek.jpg" alt="Meal of the Week Special" />
</div>
<div class="reveal-item">
<span class="eyebrow-text">Meal of the Week</span>
<h2 class="section-heading-left">Stuffed Salmon</h2>
<p>
Beautifully cooked salmon stuffed with a mixture of cream cheese, spinach, and parmesan cheese; topped over mashed potatoes with a side of asparagus. Only available this week!
</p>
<p style="font-weight: 700; color: var(--color-text-light);">
Reservations open Sunday. Pickup is this Friday only.
</p>
<a href="meal-of-week.html" class="btn ripple" style="margin-top: 1rem;">View Details & Reserve</a>
</div>
</div>
</section>

<section id="menu" class="menu section">
<h2>Our Menu</h2>
<div class="menu-list">
<a href="menu.html" class="menu-item reveal-item">
<img src="images/food-images/jollof.png" alt="Jollof Rice Tray">
<div class="menu-info">
<h3>Jollof Rice</h3>
<p>Classic smoky jollof.</p>
</div>
</a>
<a href="menu.html" class="menu-item reveal-item">
<img src="images/food-images/jerk-chicken.png" alt="Jerk Chicken Tray">
<div class="menu-info">
<h3>Jerk Chicken</h3>
<p>Authentic, spicy, and smoky grilled chicken.</p>
</div>
</a>
<a href="menu.html" class="menu-item reveal-item">
<img src="images/food-images/suya.png" alt="Suya Tray">
<div class="menu-info">
<h3>Suya</h3>
<p>Spicy grilled beef skewers.</p>
</div>
</a>
</div>
<a href="menu.html" class="btn ripple" style="margin-top: 40px;">View Full Menu</a>
</section>

<section id="reviews" class="section reviews-section">
  <h2>Customer Love</h2>
  <p class="section-subtitle">See what others are saying.</p>
  
  <button id="toggle-review-form-btn" class="btn ripple" style="margin-bottom: 2rem;">
    Write a Review!
  </button>

  <div id="review-form-container" style="display: none; max-width: 600px; margin: 0 auto 3rem auto; background: #1f1f1f; padding: 2rem; border-radius: 12px; border: 1px solid #333; text-align: left;">
    <h3 style="color: #F59E0B; margin-bottom: 1rem;">Share your experience</h3>
    
    <form id="review-form">
      <div class="form-group">
        <label style="color: #fff;">Name</label>
        <input type="text" id="reviewer-name" placeholder="Your Name" required>
      </div>
      
      <div class="form-group">
        <label style="color: #fff;">Rating</label>
        <div class="star-rating-picker">
          <input type="radio" id="star5" name="rating" value="5" checked /><label for="star5" title="5 stars">‚òÖ</label>
          <input type="radio" id="star4" name="rating" value="4" /><label for="star4" title="4 stars">‚òÖ</label>
          <input type="radio" id="star3" name="rating" value="3" /><label for="star3" title="3 stars">‚òÖ</label>
          <input type="radio" id="star2" name="rating" value="2" /><label for="star2" title="2 stars">‚òÖ</label>
          <input type="radio" id="star1" name="rating" value="1" /><label for="star1" title="1 star">‚òÖ</label>
        </div>
      </div>

      <div class="form-group">
        <label style="color: #fff;">Review</label>
        <textarea id="review-text" rows="4" placeholder="What did you order? How was it?" required style="width: 100%; padding: 14px; background: #121212; border: 1px solid #333; color: white; border-radius: 8px; font-family: inherit;"></textarea>
      </div>

      <button type="submit" class="btn ripple">Submit Review</button>
    </form>
  </div>

  <div class="reviews-container" id="reviews-list">
    <p style="color: #888;">Loading reviews...</p>
  </div>
</section>
<section id="policies" class="policies section">
    <h2>Our Policies</h2>
    <div class="policies-container">
      <div class="policy-card reveal-item">
        <h3>Payment Policy</h3>
        <p>All cart orders must be <strong> paid in full </strong> to be confirmed. The final balance is <strong>48 hours</strong> before your reservation.</p>
      </div>
      <div class="policy-card reveal-item">
        <h3>Order Lead Time</h3>
        <p>All standard cart orders must be placed at least <strong>48 hours</strong> in advance.</p>
      </div>
      <div class="policy-card reveal-item">
        <h3>Cancellations & Refunds</h3>
        <p>We can offer a <strong>50%</strong> refunds on paid cart orders 24 hours in advance.</p>
      </div>
      <div class="policy-card reveal-item">
        <h3>Pickup Policy</h3>
        <p>Orders are available for <strong>pickup in Baltimore, Maryland</strong>. Delivery is <strong>for a fee</strong> in Baltimore, Maryland.</p>
      </div>
      <div class="policy-card reveal-item">
        <h3>Allergy Disclaimer</h3>
        <p>Our food is prepared in a kitchen that processes milk, eggs, wheat, peanuts, tree nuts, and shellfish. Please <strong>contact</strong> for more information.</p>
      </div>
      <div class="policy-card reveal-item">
        <h3>Quality & Satisfaction</h3>
        <p>We pride ourselves on making your food fresh for your pickup time. If you are unsatisfied, please contact us immediately.</p>
      </div>
    </div>
  </section>

  <section id="social-feed" class="section">
    <h2>Follow Us On Instagram</h2>
    <p class="social-subtitle">See our latest dishes, events, and behind-the-scenes stories.</p>
    <div id="instagram-feed-container" class="reveal-item">
      <script src="https://cdn.lightwidget.com/widgets/lightwidget.js"></script><iframe src="//lightwidget.com/widgets/fb35f6df8ce2501dad7062950c4733a5.html" scrolling="no" allowtransparency="true" class="lightwidget-widget" style="width:100%;border:0;overflow:hidden;"></iframe>
    </div>
    <a href="https://www.instagram.com/chxkwuemeka?igsh=bnltaWV1MnU0amJt&utm_source=qr" target="_blank" class="btn ripple" style="margin-top: 40px;">@chxkwuemeka</a>
  </section>

  <section id="contact" class="contact section">
    <h2>Contact Us</h2>
    <p>Ready to build your cart? Browse our menu or reach out for catering.</p>
    <a href="menu.html" class="btn ripple">Browse Menu</a>
    <div class="contact-details">
      <p>Email: <a href="mailto:jesseobasi@gmail.com">jesseobasi@gmail.com</a></p>
      <div class="social-links">
        <a href="https://www.instagram.com/chxkwuemeka" target="_blank" class="social-icon">Instagram</a>
        <a href="https://x.com/jessescuisines" target="_blank" class="social-icon">Twitter / X</a>
      </div>
    </div>
  </section>

  <a href="cart.html" class="btn sticky-order-btn ripple">View Cart</a>

  <footer>
    <p>¬© 2025 JCuisines ‚Äî Designed with ‚ù§Ô∏è</p>
  </footer>

  <script src="cart.js"></script>

  <script>
    window.addEventListener("scroll", function() {
      const navbar = document.getElementById("navbar");
      navbar.classList.toggle("scrolled", window.scrollY > 50);
    });

    window.addEventListener("scroll", () => {
      const reveals = document.querySelectorAll(".reveal-item");
      const windowHeight = window.innerHeight;
      const revealPoint = 100;
      let delays = {};
      reveals.forEach((el) => {
        const revealTop = el.getBoundingClientRect().top;
        const parentSection = el.closest('section') ? el.closest('section').id : 'body';
        if (!delays[parentSection]) delays[parentSection] = 0;
        if (revealTop < windowHeight - revealPoint) {
          if (!el.classList.contains("active")) {
            el.style.transitionDelay = delays[parentSection] + "ms";
            el.classList.add("active");
            delays[parentSection] += 150; 
          }
        }
      });
    });

    document.querySelectorAll('.ripple').forEach(btn => {
      btn.addEventListener('click', function(e) {
        const ripple = document.createElement('span');
        ripple.classList.add('ripple-effect');
        ripple.style.left = e.offsetX + 'px';
        ripple.style.top = e.offsetY + 'px';
        this.appendChild(ripple);
        setTimeout(() => ripple.remove(), 600);
      });
    });

    const menuToggle = document.querySelector(".menu-toggle");
    const navLinks = document.querySelector(".nav-links");
    menuToggle.addEventListener("click", () => {
      menuToggle.classList.toggle("active");
      navLinks.classList.toggle("active");
    });

    const preloader = document.getElementById('preloader');
    window.addEventListener('load', () => {
      preloader.classList.add('loaded');
    });

    if ('serviceWorker' in navigator) {
      window.addEventListener('load', function() {
        navigator.serviceWorker.register('/sw.js');
      });
    }
  </script>

  <script type="module">
    // Import from CDN so it works in the browser
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.0.0/firebase-app.js";
    import { getFirestore, collection, addDoc, getDocs, query, orderBy, limit } from "https://www.gstatic.com/firebasejs/10.0.0/firebase-firestore.js";

    // Your JCUISINES Firebase Configuration
    const firebaseConfig = {
      apiKey: "AIzaSyDMolbuL0WiwOa0UBp1Nuu3V7ZGA-p6iiU",
      authDomain: "jcuisines-bf75f.firebaseapp.com",
      projectId: "jcuisines-bf75f",
      storageBucket: "jcuisines-bf75f.firebasestorage.app",
      messagingSenderId: "400777479658",
      appId: "1:400777479658:web:5d114c3a78d660c0f89e93",
      measurementId: "G-3V1VCRLJLC"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    // 1. Toggle Form Visibility
    const toggleBtn = document.getElementById('toggle-review-form-btn');
    const formContainer = document.getElementById('review-form-container');
    if(toggleBtn) {
        toggleBtn.addEventListener('click', () => {
            if (formContainer.style.display === "none") {
                formContainer.style.display = "block";
                toggleBtn.textContent = "Close Form";
            } else {
                formContainer.style.display = "none";
                toggleBtn.textContent = "Write a Review";
            }
        });
    }

    // 2. Load Reviews from Firestore
    async function loadReviews() {
        const reviewsList = document.getElementById('reviews-list');
        reviewsList.innerHTML = '<p style="color: #888;">Loading reviews...</p>';

        try {
            // Get reviews, sorted by newest date
            const q = query(collection(db, "reviews"), orderBy("date", "desc"), limit(6));
            const querySnapshot = await getDocs(q);
            reviewsList.innerHTML = ""; 

            if (querySnapshot.empty) {
                reviewsList.innerHTML = '<p>No reviews yet. Be the first!</p>';
                return;
            }

            querySnapshot.forEach((doc) => {
                const data = doc.data();
                const starString = "‚òÖ".repeat(data.rating);
                
                const cardHTML = `
                    <div class="review-card reveal-item active">
                        <div class="review-header">
                            <div class="stars">${starString}</div>
                            <h3>${data.name}</h3> 
                        </div>
                        <p class="review-text">"${data.text}"</p>
                        <div class="reviewer-info">
                            <span class="verified-badge">‚úî Verified Customer</span>
                        </div>
                    </div>`;
                reviewsList.innerHTML += cardHTML;
            });
        } catch (error) {
            console.error("Error fetching reviews:", error);
            reviewsList.innerHTML = '<p>Could not load reviews.</p>';
        }
    }

    // 3. Submit Review to Firestore
    const reviewForm = document.getElementById('review-form');
    if(reviewForm) {
        reviewForm.addEventListener('submit', async (e) => {
            e.preventDefault();

            const name = document.getElementById('reviewer-name').value;
            const text = document.getElementById('review-text').value;
            const ratingInput = document.querySelector('input[name="rating"]:checked');
            const rating = ratingInput ? parseInt(ratingInput.value) : 5;

            try {
                await addDoc(collection(db, "reviews"), {
                    name: name,
                    text: text,
                    rating: rating,
                    date: new Date()
                });
                alert("Thank you! Your review has been posted.");
                reviewForm.reset();
                formContainer.style.display = "none";
                toggleBtn.textContent = "Write a Review";
                
                // Refresh the list immediately
                loadReviews(); 
            } catch (error) {
                console.error("Error adding review: ", error);
                alert("Something went wrong. Please try again.");
            }
        });
    }

    // Run on page load
    window.addEventListener('DOMContentLoaded', loadReviews);
  </script>

</body>
</html>